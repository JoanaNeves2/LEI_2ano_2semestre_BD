-- 1.1

drop table colocados cascade constraints;
drop table matriculas cascade constraints;
drop table cursos cascade constraints;
drop table cadeiras cascade constraints;
drop table planos cascade constraints;
drop table inscricoes cascade constraints;
--
drop table inativas cascade constraints;

drop sequence seq_num_aluno;

create table colocados(
  idCandidato number(11,0),
  nome varchar2(30),
  curso varchar2(4),
  ano number(4,0)
);

create table matriculas(
  numero number(6,0),
  idCandidato number(11,0),
  curso varchar2(4),
  dataMatr date
);

create table cursos(
  curso varchar2(4),
  nomeCurso varchar2(255)
);

create table cadeiras(
  cadeira number(5,0),
  nomeCad varchar2(200),
  ects number(2,0)
);

create table planos(
  cadeira number(5,0),
  curso varchar2(4),
  semestre number(2,0)
);

create table inscricoes(
  numero number(6,0),
  curso varchar2(4),
  cadeira number(5,0),
  anoLetivo number(4,0),
  dataInscr date
);


-- 1.2

-- Chaves primárias
alter table colocados add constraint pk_col primary key(idCandidato);
alter table matriculas add constraint pk_mat primary key(numero);
alter table cursos add constraint pk_cur primary key(curso);
alter table cadeiras add constraint pk_cad primary key(cadeira);
alter table planos add constraint pk_pla primary key(cadeira,curso);
alter table inscricoes add constraint pk_ins primary key(numero,cadeira,anoLetivo);

-- Chaves candidatas e estrangeiras
alter table colocados add constraint fk_colcurso foreign key (curso) references cursos(curso);
alter table matriculas add constraint un_mat unique(idCandidato);

alter table colocados add constraint un_col unique(idCandidato,curso);
alter table matriculas add constraint fk_matrcolcurso foreign key (idCandidato,curso) references colocados(idCandidato,curso);

alter table planos add constraint fk_pcur foreign key (curso) references cursos(curso);
alter table planos add constraint fk_pcad foreign key (cadeira) references cadeiras(cadeira);

alter table matriculas add constraint un_matnumcur unique(numero,curso);
alter table inscricoes add constraint fk_inscurso foreign key (numero,curso) references matriculas(numero,curso);
alter table inscricoes add constraint fk_insplano foreign key (curso,cadeira) references planos(curso,cadeira);

-- Outras restricoes
alter table cadeiras add constraint numCred check(ects >= 3 and ects <=60);

-- 1.3


-- Criação prévia de sinónimos

create or replace synonym candidatos for candidaturas.candidatos;
create or replace synonym colocacoes for candidaturas.colocacoes;


-- Inserir os dados a partir de candidaturas
insert into cursos
  select curso, nomeCurso
  from candidaturas.cursos natural join candidaturas.ofertas
  where estab = '0903';
  commit;

insert into colocados
  select idCandidato, nome, curso, 2022
  from candidatos inner join colocacoes using (idCandidato)
  where estab = '0903';
  commit;
  
-- 1.4
delete from planos;
delete from cadeiras;

insert all
    into cadeiras values (7155, 'Análise e Métodos Socio-Ambientais', 3)
    into cadeiras values (7156, 'Climatologia', 3)
    into cadeiras values (7170, 'Poluição Acústica', 3)
    into cadeiras values (10345, 'Ambiente e Desenvolvimento Sustentável', 3)
    into cadeiras values (10346, 'Desenho Técnico', 3)
    into cadeiras values (10351, 'Geologia', 3)
    into cadeiras values (10352, 'Competências Transversais para Ciências e Tecnologia', 3)
    into cadeiras values (10356, 'Ecologia Geral', 3)
    into cadeiras values (10357, 'Processos em Ambiente e Energia', 3)
    into cadeiras values (10358, 'Ciência, Tecnologia e Sociedade', 3)
    into cadeiras values (10359, 'Microbiologia C', 3)
    into cadeiras values (10364, 'Ecologia Terrestre', 3)
    into cadeiras values (10372, 'Urbanismo, Transportes e Ambiente', 3)
    into cadeiras values (10380, 'Empreendedorismo', 3)
    into cadeiras values (10389, 'Seminário de Política e Inovação em Ambiente', 3)
    into cadeiras values (10397, 'Hidráulica Urbana', 3)
    into cadeiras values (10398, 'Sistemas Avançados de Tratamento de Águas', 3)
    into cadeiras values (10400, 'Laboratório de Operações e Processos', 3)
    into cadeiras values (10405, 'Equipamentos Eletromecânicos e Automação', 3)
    into cadeiras values (10406, 'Introdução à Ciência e Engenharia de Materiais', 3)
    into cadeiras values (10413, 'Desenho Técnico Assistido por Computador', 3)
    into cadeiras values (10415, 'Cerâmicos Técnicos', 3)
    into cadeiras values (10416, 'Introdução às Micro e Nanotecnologias', 3)
    into cadeiras values (10422, 'Seminários em Micro e Nanotecnologias', 3)
    into cadeiras values (10423, 'Gestão de Empresas', 3)
    into cadeiras values (10425, 'Iniciação à Dissertação', 3)
    into cadeiras values (10426, 'Desenho Técnico', 3)
    into cadeiras values (10427, 'Geologia para Engenharia Civil', 3)
    into cadeiras values (10428, 'Introdução à Engenharia Civil', 3)
    into cadeiras values (10430, 'Desenho Assistido por Computador', 3)
    into cadeiras values (10431, 'Topografia e Sistemas de Informação Geográfica', 3)
    into cadeiras values (10434, 'Arquitetura', 3)
    into cadeiras values (10437, 'Métodos Computacionais em Engenharia', 3)
    into cadeiras values (10441, 'Segurança Estrutural', 3)
    into cadeiras values (10446, 'Edificações', 3)
    into cadeiras values (10450, 'Planeamento da Construção', 3)
    into cadeiras values (10459, 'Temas de Estruturas', 3)
    into cadeiras values (10464, 'Modelação em Geotecnia', 3)
    into cadeiras values (10473, 'Desenho Assistido por Computador', 3)
    into cadeiras values (10478, 'Cálculo Numérico', 3)
    into cadeiras values (10481, 'Instrumentação e Medidas Elétricas', 3)
    into cadeiras values (10496, 'Introdução às Tecnologias e Processos Mecânicos', 3)
    into cadeiras values (10511, 'Introdução à Dissertação', 3)
    into cadeiras values (10518, 'Desenho Técnico', 3)
    into cadeiras values (10520, 'Biologia Celular B', 3)
    into cadeiras values (10521, 'Biologia Molecular C', 3)
    into cadeiras values (10528, 'Tópicos de Engenharia Biomédica', 3)
    into cadeiras values (10530, 'Criogenia', 3)
    into cadeiras values (10531, 'Lasers', 3)
    into cadeiras values (10538, 'Introdução à Física Experimental', 3)
    into cadeiras values (10546, 'Ensaios Destrutivos e não Destrutivos', 3)
    into cadeiras values (10574, 'Introdução à Engenharia Industrial', 3)
    into cadeiras values (10579, 'Economia', 3)
    into cadeiras values (10581, 'Eletrónica Geral', 3)
    into cadeiras values (10588, 'Ergonomia', 3)
    into cadeiras values (10610, 'Segurança e Higiene Ocupacionais', 3)
    into cadeiras values (10614, 'Metodologias de Investigação', 3)
    into cadeiras values (10649, 'Técnicas de Laboratório em Biologia I', 3)
    into cadeiras values (10653, 'Bio-Segurança e Bioética', 3)
    into cadeiras values (10662, 'Seminário', 3)
    into cadeiras values (10665, 'Petrologia  Ígnea e Metamórfica', 3)
    into cadeiras values (10669, 'Geoquímica', 3)
    into cadeiras values (10671, 'Geologia de Portugal', 3)
    into cadeiras values (10672, 'Prospeção Mecânica', 3)
    into cadeiras values (10677, 'Computação', 3)
    into cadeiras values (10705, 'Química Computacional', 3)
    into cadeiras values (10716, 'Quimio-informática', 3)
    into cadeiras values (10748, 'Processos, Desenvolvimento e Monitorização', 3)
    into cadeiras values (10824, 'Técnicas de Laboratório', 3)
    into cadeiras values (10866, 'Química Inorgânica II', 3)
    into cadeiras values (10874, 'Programa de Introdução à Investigação Científica em Bioquímica', 3)
    into cadeiras values (10925, 'Materiais, Processos e Gestão da Construção', 3)
    into cadeiras values (10942, 'Introdução à Física', 3)
    into cadeiras values (11005, 'Desenho', 3)
    into cadeiras values (11006, 'Fotografia Documental', 3)
    into cadeiras values (11024, 'Cartografia Geológica', 3)
    into cadeiras values (11025, 'Rochas Industriais e Ornamentais', 3)
    into cadeiras values (11035, 'Programa de Introdução à Investigação Científica em Química Aplicada', 3)
    into cadeiras values (11191, 'Aspetos Socio-Profissionais da Informática', 3)
    into cadeiras values (11506, 'Nanomateriais e Nanotecnologias', 3)
    into cadeiras values (11507, 'Projeto de Dissertação', 3)
    into cadeiras values (11508, 'Seleção de Materiais e Sustentabilidade', 3)
    into cadeiras values (11512, 'Eletromagnetismo Avançado', 3)
    into cadeiras values (11513, 'Projeto de Iniciação', 3)
    into cadeiras values (11514, 'Ótica', 3)
    into cadeiras values (11517, 'Nanofísica', 3)
    into cadeiras values (11518, 'Técnicas de Espetroscopia', 3)
    into cadeiras values (11521, 'Física dos Novos Materiais', 3)
    into cadeiras values (11523, 'Técnicas Experimentais de Física Molecular', 3)
    into cadeiras values (11536, 'Tecnologia de Superfícies e Interfaces', 3)
    into cadeiras values (11826, 'Biomecânica', 3)
    into cadeiras values (11827, 'Hemodinâmica', 3)
    into cadeiras values (11828, 'Desenho Técnico', 3)
    into cadeiras values (1116, 'Biologia Molecular B', 6)
    into cadeiras values (1473, 'Estruturas Metálicas', 6)
    into cadeiras values (1491, 'Física de Polímeros', 6)
    into cadeiras values (1525, 'Física Nuclear', 6)
    into cadeiras values (1712, 'Inteligência Artificial', 6)
    into cadeiras values (1837, 'Materiais de Construção I', 6)
    into cadeiras values (1839, 'Materiais de Construção II', 6)
    into cadeiras values (1849, 'Materiais Semicondutores', 6)
    into cadeiras values (1897, 'Metalurgia Física e Metalografia', 6)
    into cadeiras values (2077, 'Princípios de Mineralogia e Geologia', 6)
    into cadeiras values (2184, 'Propagação e Radiação', 6)
    into cadeiras values (2212, 'Química Física I', 6)
    into cadeiras values (2227, 'Química Inorgânica (CR)', 6)
    into cadeiras values (2309, 'Simulação', 6)
    into cadeiras values (2363, 'Sistemas Robóticos e CIM', 6)
    into cadeiras values (2424, 'Tecnologia de Controlo', 6)
    into cadeiras values (2468, 'Teoria da Computação', 6)
    into cadeiras values (2478, 'Teoria de Sistemas', 6)
    into cadeiras values (2567, 'Microprocessadores', 6)
    into cadeiras values (2626, 'Produção Integrada por Computador', 6)
    into cadeiras values (2641, 'Gestão da Produção', 6)
    into cadeiras values (2672, 'Materiais Metálicos', 6)
    into cadeiras values (2677, 'Diagnóstico e Conservação de Metais', 6)
    into cadeiras values (2680, 'Diagnóstico e Conservação de Documentos Gráficos', 6)
    into cadeiras values (2685, 'História da Arte da Antiguidade', 6)
    into cadeiras values (2690, 'História da Arte Medieval', 6)
    into cadeiras values (2691, 'História da Arte da Idade Moderna', 6)
    into cadeiras values (2693, 'História da Arte Contemporânea', 6)
    into cadeiras values (2696, 'Princípios de Bioquímica', 6)
    into cadeiras values (2761, 'Hidrogeologia', 6)
    into cadeiras values (2784, 'Obras Geotécnicas', 6)
    into cadeiras values (2826, 'Alta Tensão', 6)
    into cadeiras values (2846, 'Controlo e Decisão na Energia', 6)
    into cadeiras values (3086, 'Fisiologia', 6)
    into cadeiras values (3107, 'Introdução à Investigação Operacional', 6)
    into cadeiras values (3466, 'Biologia Vegetal', 6)
    into cadeiras values (3622, 'Introdução à Programação (B)', 6)
    into cadeiras values (3629, 'Matemática Discreta', 6)
    into cadeiras values (3645, 'Probabilidades e Estatística', 6)
    into cadeiras values (3651, 'Mecânica Aplicada II', 6)
    into cadeiras values (3654, 'Mecânica dos Sólidos I', 6)
    into cadeiras values (3656, 'Mecânica dos Sólidos II', 6)
    into cadeiras values (3658, 'Dinâmica dos Fluidos I', 6)
    into cadeiras values (3660, 'Comportamento Mecânico dos Materiais', 6)
    into cadeiras values (3666, 'Orgãos de Máquinas I', 6)
    into cadeiras values (3668, 'Vibrações Mecânicas e Ruído', 6)
    into cadeiras values (3669, 'Termodinâmica Aplicada', 6)
    into cadeiras values (3683, 'Teoria da Ligação Química', 6)
    into cadeiras values (3689, 'Termodinâmica Química', 6)
    into cadeiras values (3690, 'Química Orgânica Geral', 6)
    into cadeiras values (3705, 'Planeamento e Controlo da Qualidade', 6)
    into cadeiras values (3708, 'Contabilidade e Análise de Custos', 6)
    into cadeiras values (3710, 'Logística', 6)
    into cadeiras values (3731, 'Sistemas de Informação para a Indústria', 6)
    into cadeiras values (3733, 'Planeamento e Controlo da Produção', 6)
    into cadeiras values (3736, 'Marketing e Inovação', 6)
    into cadeiras values (3737, 'Introdução à Química da Vida', 6)
    into cadeiras values (3742, 'Algoritmos e Estruturas de Dados', 6)
    into cadeiras values (3745, 'Sistemas Lógicos II', 6)
    into cadeiras values (3748, 'Teoria de Sinais', 6)
    into cadeiras values (3752, 'Teoria de Controlo', 6)
    into cadeiras values (3753, 'Sistemas de Tempo Real', 6)
    into cadeiras values (3804, 'Microbiologia B', 6)
    into cadeiras values (3813, 'Petrologia Sedimentar e Sedimentologia', 6)
    into cadeiras values (3827, 'Mecânica dos Solos', 6)
    into cadeiras values (3919, 'Física Estatística', 6)
    into cadeiras values (4094, 'Engenharia Económica', 6)
    into cadeiras values (5004, 'Análise Matemática III C', 6)
    into cadeiras values (5005, 'Análise Matemática III B', 6)
    into cadeiras values (5006, 'Análise Matemática IV B', 6)
    into cadeiras values (5016, 'Fiabilidade e Gestão da Manutenção', 6)
    into cadeiras values (5278, 'Modelação Computacional de Materiais', 6)
    into cadeiras values (5284, 'Métodos de Imagem Médica', 6)
    into cadeiras values (5289, 'Análise de Sinais', 6)
    into cadeiras values (5294, 'Sistemas Lógicos', 6)
    into cadeiras values (5324, 'Biossensores', 6)
    into cadeiras values (5340, 'Biomateriais', 6)
    into cadeiras values (5353, 'Microbiologia A', 6)
    into cadeiras values (5474, 'Mecânica dos Solos C', 6)
    into cadeiras values (7087, 'Química Orgânica I', 6)
    into cadeiras values (7095, 'Química Orgânica II', 6)
    into cadeiras values (7102, 'Métodos de Separação', 6)
    into cadeiras values (7104, 'Genética Molecular B', 6)
    into cadeiras values (7107, 'Análise Estrutural', 6)
    into cadeiras values (7112, 'Engenharia Genética', 6)
    into cadeiras values (7122, 'Biologia Celular C', 6)
    into cadeiras values (7171, 'Hidrologia', 6)
    into cadeiras values (7214, 'Gestão de Stocks', 6)
    into cadeiras values (7226, 'Modelação de Dados em Engenharia', 6)
    into cadeiras values (7228, 'Supervisão Inteligente', 6)
    into cadeiras values (7268, 'Tecnologias Limpas e Química Verde', 6)
    into cadeiras values (7289, 'Fenómenos de Transferência I', 6)
    into cadeiras values (7300, 'Bioquímica Analítica', 6)
    into cadeiras values (7303, 'Comunicação Sem Fios', 6)
    into cadeiras values (7305, 'Sistemas de Controlo', 6)
    into cadeiras values (7311, 'Redes Integradas de Telecomunicações I', 6)
    into cadeiras values (7312, 'Sistemas de Decisão', 6)
    into cadeiras values (7316, 'Empresas Virtuais', 6)
    into cadeiras values (7317, 'Sistemas de Aquisição de Dados', 6)
    into cadeiras values (7319, 'Processos de Separação I', 6)
    into cadeiras values (7321, 'Bioquímica Geral B', 6)
    into cadeiras values (7336, 'Lógica Computacional', 6)
    into cadeiras values (7340, 'Química Física II', 6)
    into cadeiras values (7342, 'Instrumentação e Controlo de Processos', 6)
    into cadeiras values (7382, 'Matemática I', 6)
    into cadeiras values (7396, 'Física I C', 6)
    into cadeiras values (7399, 'Matemática II', 6)
    into cadeiras values (7403, 'Engenharia Bioquímica II', 6)
    into cadeiras values (7414, 'Conservação Preventiva', 6)
    into cadeiras values (7417, 'Diagnóstico e Conservação de Pedra', 6)
    into cadeiras values (7418, 'Diagnóstico e Conservação de Cerâmicos e Vidro', 6)
    into cadeiras values (7419, 'Direito do Património', 6)
    into cadeiras values (7420, 'Gestão do Património', 6)
    into cadeiras values (7436, 'Reologia dos Materiais', 6)
    into cadeiras values (7454, 'Materiais e Tecnologias de Mostradores Planos', 6)
    into cadeiras values (7464, 'Materiais Cerâmicos e Vidros', 6)
    into cadeiras values (7471, 'Propriedades Físicas dos Materiais', 6)
    into cadeiras values (7474, 'Técnicas de Instrumentação', 6)
    into cadeiras values (7477, 'Sistemas Sensoriais', 6)
    into cadeiras values (7490, 'Tratamentos Térmicos e Mecânicos', 6)
    into cadeiras values (7492, 'Materiais para a Conversão e Conservação de Energia', 6)
    into cadeiras values (7494, 'Superfícies e Interfaces', 6)
    into cadeiras values (7522, 'Tecnologias de Revestimentos e Películas Finas', 6)
    into cadeiras values (7544, 'Análise Matemática III D', 6)
    into cadeiras values (7580, 'Dinâmica de Estruturas', 6)
    into cadeiras values (7588, 'Anatomia', 6)
    into cadeiras values (7661, 'Sistemas de Informação  Médica', 6)
    into cadeiras values (7663, 'Física', 6)
    into cadeiras values (7702, 'Topografia e Geologia de Campo', 6)
    into cadeiras values (7706, 'Estratigrafia e Paleontologia', 6)
    into cadeiras values (7712, 'Geologia Estrutural', 6)
    into cadeiras values (7715, 'Resistência de Materiais', 6)
    into cadeiras values (7719, 'Geologia de Engenharia', 6)
    into cadeiras values (7747, 'Bases de Dados', 6)
    into cadeiras values (7777, 'Programação de Microprocessadores', 6)
    into cadeiras values (7792, 'Vias de Comunicação', 6)
    into cadeiras values (7813, 'Análise Complexa', 6)
    into cadeiras values (7814, 'Equações Diferenciais', 6)
    into cadeiras values (7816, 'Medida, Integração e Probabilidades', 6)
    into cadeiras values (7933, 'Biologia Animal', 6)
    into cadeiras values (7996, 'Análise Matemática II E', 6)
    into cadeiras values (8143, 'Técnicas de Laboratório em Biologia II', 6)
    into cadeiras values (8147, 'Linguagens e Ambientes de Programação', 6)
    into cadeiras values (8148, 'Métodos de Desenvolvimento de Software', 6)
    into cadeiras values (8149, 'Redes de Computadores', 6)
    into cadeiras values (8150, 'Computação Gráfica e Interfaces', 6)
    into cadeiras values (8153, 'Sistemas Distribuídos', 6)
    into cadeiras values (8154, 'Análise e Desenho de Algoritmos', 6)
    into cadeiras values (8163, 'Estudo do Trabalho', 6)
    into cadeiras values (8437, 'Lajes e Cascas', 6)
    into cadeiras values (8575, 'Introdução à Investigação Operacional', 6)
    into cadeiras values (8708, 'Organização e Gestão de Obras', 6)
    into cadeiras values (8789, 'Elementos de Análise e Álgebra II', 6)
    into cadeiras values (8791, 'Metabolismo e Regulação B', 6)
    into cadeiras values (8792, 'Estatística', 6)
    into cadeiras values (9279, 'Química Física II A', 6)
    into cadeiras values (9123, 'Estática', 6)
    into cadeiras values (9376, 'Hidráulica Urbana', 6)
    into cadeiras values (9377, 'Análise de Estruturas Geotécnicas', 6)
    into cadeiras values (9379, 'Análise de Estruturas II', 6)
    into cadeiras values (9387, 'Instalações Prediais', 6)
    into cadeiras values (9398, 'Obras Subterrâneas', 6)
    into cadeiras values (9405, 'Obras de Terra', 6)
    into cadeiras values (9414, 'Probabilidades e Estatística E', 6)
    into cadeiras values (9477, 'Técnicas de Caracterização de Materiais', 6)
    into cadeiras values (10106, 'Introdução à Conservação e Restauro II', 6)
    into cadeiras values (10130, 'Introdução à Conservação e Restauro I', 6)
    into cadeiras values (10144, 'Compósitos - Materiais e Aplicações', 6)
    into cadeiras values (10194, 'Mecânica dos Materiais I', 6)
    into cadeiras values (10195, 'Mecânica dos Materiais II', 6)
    into cadeiras values (10197, 'Tecnologias de Enformação de Materiais Metálicos', 6)
    into cadeiras values (10199, 'Tecnologia de Cerâmicos e Vidros', 6)
    into cadeiras values (10200, 'Processamento e Reciclagem de Polímeros', 6)
    into cadeiras values (10201, 'Cristais Líquidos e Aplicações', 6)
    into cadeiras values (10288, 'Produção e Transporte de Energia', 6)
    into cadeiras values (10343, 'Química A', 6)
    into cadeiras values (10344, 'Informática para Ciências e Engenharias', 6)
    into cadeiras values (10347, 'Análise Matemática II C', 6)
    into cadeiras values (10348, 'Bioquímica Geral C', 6)
    into cadeiras values (10349, 'Física I', 6)
    into cadeiras values (10350, 'Biologia', 6)
    into cadeiras values (10353, 'Física II', 6)
    into cadeiras values (10354, 'Probabilidades e Estatística D', 6)
    into cadeiras values (10355, 'Topografia e Tecnologias de Informação Geográfica', 6)
    into cadeiras values (10360, 'Técnicas Laboratoriais em Ambiente', 6)
    into cadeiras values (10361, 'Investigação Operacional', 6)
    into cadeiras values (10362, 'Hidráulica Geral', 6)
    into cadeiras values (10363, 'Introdução às Probabilidades Estatística e Investigação Operacional', 6)
    into cadeiras values (10365, 'Análise de Dados e Simulação em Ambiente', 6)
    into cadeiras values (10366, 'Poluição da Água', 6)
    into cadeiras values (10367, 'Planeamento e Ordenamento do Território', 6)
    into cadeiras values (10368, 'Solo e Poluição do Solo', 6)
    into cadeiras values (10369, 'Economia do Ambiente', 6)
    into cadeiras values (10370, 'Poluição e Gestão do Ar', 6)
    into cadeiras values (10371, 'Ecotoxicologia e Saúde Ambiental', 6)
    into cadeiras values (10375, 'Gestão de Resíduos', 6)
    into cadeiras values (10376, 'Abastecimento e Tratamento de Águas', 6)
    into cadeiras values (10377, 'Drenagem e Tratamento de Águas Residuais', 6)
    into cadeiras values (10378, 'Gestão do Ambiente', 6)
    into cadeiras values (10379, 'Gestão da Água', 6)
    into cadeiras values (10388, 'Projeto em Engenharia do Ambiente', 6)
    into cadeiras values (10399, 'Sistemas de Tratamento de Águas Residuais  e Efluentes Industriais', 6)
    into cadeiras values (10401, 'Sistemas de Tratamentos de Resíduos', 6)
    into cadeiras values (10407, 'Química B', 6)
    into cadeiras values (10408, 'Cristaloquímica', 6)
    into cadeiras values (10410, 'Probabilidades e Estatística C', 6)
    into cadeiras values (10411, 'Física III', 6)
    into cadeiras values (10412, 'Química dos Polímeros', 6)
    into cadeiras values (10417, 'Tecnologia de Nanomateriais', 6)
    into cadeiras values (10418, 'Comportamento Mecânico de Nanomateriais', 6)
    into cadeiras values (10419, 'Bioquímica Geral B', 6)
    into cadeiras values (10420, 'Gestão da Qualidade', 6)
    into cadeiras values (10424, 'Nanofabricação e Caracterização de Nanoestruturas', 6)
    into cadeiras values (10429, 'Química C', 6)
    into cadeiras values (10432, 'Dinâmica dos Corpos Rígidos', 6)
    into cadeiras values (10433, 'Hidráulica', 6)
    into cadeiras values (10435, 'Hidrologia e Obras de Drenagem', 6)
    into cadeiras values (10436, 'Mecânica dos Meios Contínuos', 6)
    into cadeiras values (10438, 'Planeamento Regional e Urbano', 6)
    into cadeiras values (10439, 'Resistência de Materiais I', 6)
    into cadeiras values (10440, 'Resistência de Materiais II', 6)
    into cadeiras values (10442, 'Análise de Estruturas I', 6)
    into cadeiras values (10443, 'Estruturas de Betão Armado I', 6)
    into cadeiras values (10444, 'Física das Construções', 6)
    into cadeiras values (10445, 'Tecnologias da Construção', 6)
    into cadeiras values (10447, 'Estruturas de Betão Armado II', 6)
    into cadeiras values (10448, 'Tecnologia de Revestimentos', 6)
    into cadeiras values (10451, 'Reabilitação de Edifícios', 6)
    into cadeiras values (10454, 'Gestão do Território e Prevenção de Riscos', 6)
    into cadeiras values (10455, 'Método dos Elementos Finitos', 6)
    into cadeiras values (10462, 'Engenharia Sísmica', 6)
    into cadeiras values (10463, 'Fundações Especiais e Contenções', 6)
    into cadeiras values (10465, 'Projeto Geotécnico', 6)
    into cadeiras values (10466, 'Urbanismo, Infraestruturas e Equipamentos Urbanos', 6)
    into cadeiras values (10467, 'Complementos de Vias de Comunicação', 6)
    into cadeiras values (10468, 'Mobilidade e Transportes', 6)
    into cadeiras values (10469, 'Pavimentos Rodoviários', 6)
    into cadeiras values (10470, 'Projeto de Urbanismo', 6)
    into cadeiras values (10475, 'Sistemas Lógicos I', 6)
    into cadeiras values (10476, 'Análise Matemática II B', 6)
    into cadeiras values (10477, 'Tecnologias de Corte', 6)
    into cadeiras values (10479, 'Introdução às Telecomunicações', 6)
    into cadeiras values (10480, 'Sistemas de Telecomunicações', 6)
    into cadeiras values (10482, 'Desenho de Construção Mecânica', 6)
    into cadeiras values (10485, 'Comunicação Digital', 6)
    into cadeiras values (10486, 'Dinâmica dos Fluidos II', 6)
    into cadeiras values (10487, 'Configuração e Gestão de Redes', 6)
    into cadeiras values (10489, 'Acionamentos Eletromecânicos Especiais', 6)
    into cadeiras values (10490, 'Economia Industrial', 6)
    into cadeiras values (10493, 'Automação', 6)
    into cadeiras values (10494, 'Tecnologias de Fundição e Soldadura', 6)
    into cadeiras values (10495, 'Teoria e Metodologias de Projeto', 6)
    into cadeiras values (10499, 'Instalações Elétricas', 6)
    into cadeiras values (10501, 'Nanocircuitos e Sistemas Analógicos', 6)
    into cadeiras values (10503, 'Tecnologias de Enformação Plástica', 6)
    into cadeiras values (10504, 'Redes Móveis', 6)
    into cadeiras values (10505, 'Transmissão do Calor', 6)
    into cadeiras values (10515, 'Biofísica', 6)
    into cadeiras values (10517, 'Sistemas Lógicos', 6)
    into cadeiras values (10519, 'Eletromagnetismo', 6)
    into cadeiras values (10522, 'Vibrações e Ondas', 6)
    into cadeiras values (10523, 'Introdução aos Biomateriais', 6)
    into cadeiras values (10524, 'Eletrónica', 6)
    into cadeiras values (10525, 'Mecânica Quântica', 6)
    into cadeiras values (10526, 'Eletrónica Aplicada', 6)
    into cadeiras values (10527, 'Física Atómica e Molecular', 6)
    into cadeiras values (10532, 'Fisiopatologia', 6)
    into cadeiras values (10534, 'Eletrofisiologia', 6)
    into cadeiras values (10535, 'Imagiologia', 6)
    into cadeiras values (10536, 'Radiação e Radioterapia', 6)
    into cadeiras values (10537, 'Preparação da Dissertação', 6)
    into cadeiras values (10539, 'Mecânica', 6)
    into cadeiras values (10540, 'Termodinâmica', 6)
    into cadeiras values (10541, 'Cálculo Numérico', 6)
    into cadeiras values (10544, 'Tecnologia de Vácuo e de Partículas Carregadas', 6)
    into cadeiras values (10551, 'Técnicas de Caraterização de Materiais e de Superfícies', 6)
    into cadeiras values (10571, 'Desenho Industrial', 6)
    into cadeiras values (10572, 'Análise Matemática II D', 6)
    into cadeiras values (10573, 'Tecnologias e Processos Químicos', 6)
    into cadeiras values (10575, 'Ciência dos Materiais', 6)
    into cadeiras values (10576, 'Mecânica Aplicada I', 6)
    into cadeiras values (10577, 'Tecnologias e Processos Mecânicos', 6)
    into cadeiras values (10578, 'Mecânica dos Sólidos', 6)
    into cadeiras values (10580, 'Métodos Quantitativos', 6)
    into cadeiras values (10587, 'Dinâmica de Fluidos', 6)
    into cadeiras values (10633, 'Desenho Assistido por Computador', 6)
    into cadeiras values (10647, 'Introdução à Biologia', 6)
    into cadeiras values (10648, 'Matemática para Biologia', 6)
    into cadeiras values (10650, 'Bioquímica Geral A', 6)
    into cadeiras values (10651, 'Fundamentos de Ecologia', 6)
    into cadeiras values (10652, 'Metabolismo e Regulação', 6)
    into cadeiras values (10654, 'Biologia Molecular A', 6)
    into cadeiras values (10655, 'Genética Molecular A', 6)
    into cadeiras values (10660, 'Biotecnologia', 6)
    into cadeiras values (10661, 'Fisiologia', 6)
    into cadeiras values (10663, 'Geologia Geral', 6)
    into cadeiras values (10664, 'Mineralogia', 6)
    into cadeiras values (10666, 'Geostatística e Tratamento de Dados', 6)
    into cadeiras values (10667, 'Sistemas de Representação Geológica e Geográfica', 6)
    into cadeiras values (10668, 'Geofísica', 6)
    into cadeiras values (10670, 'Deteção Remota', 6)
    into cadeiras values (10675, 'Introdução à Engenharia Química e Bioquímica', 6)
    into cadeiras values (10676, 'Química Inorgânica I', 6)
    into cadeiras values (10678, 'Fenómenos de Transferência II', 6)
    into cadeiras values (10679, 'Engenharia Bioquímica I', 6)
    into cadeiras values (10681, 'Operações Sólido-Fluido', 6)
    into cadeiras values (10683, 'Reatores Químicos II', 6)
    into cadeiras values (10684, 'Simulação e Otimização de Processos', 6)
    into cadeiras values (10690, 'Introdução à Química-Física', 6)
    into cadeiras values (10692, 'Matemática Geral', 6)
    into cadeiras values (10693, 'Introdução à Bioquímica', 6)
    into cadeiras values (10694, 'Bioinorgânica', 6)
    into cadeiras values (10695, 'Química Orgânica', 6)
    into cadeiras values (10696, 'Química-Física', 6)
    into cadeiras values (10697, 'Bioquímica', 6)
    into cadeiras values (10698, 'Química Analítica', 6)
    into cadeiras values (10699, 'Mecanismos de Reações Químicas e Biológicas', 6)
    into cadeiras values (10701, 'Biossíntese de Produtos Naturais', 6)
    into cadeiras values (10702, 'Fundamentos de Bioquímica Estrutural', 6)
    into cadeiras values (10704, 'Síntese Orgânica', 6)
    into cadeiras values (10707, 'Elementos de Análise e Álgebra I', 6)
    into cadeiras values (10709, 'Métodos Instrumentais de Análise', 6)
    into cadeiras values (10710, 'Mecanismos de Reações Químicas', 6)
    into cadeiras values (10713, 'Química Geral', 6)
    into cadeiras values (10714, 'Enzimologia', 6)
    into cadeiras values (10715, 'Química dos Elementos', 6)
    into cadeiras values (10721, 'Espectroscopia em Bioquímica', 6)
    into cadeiras values (10822, 'Reatores Químicos I', 6)
    into cadeiras values (10867, 'Química Orgânica (CR)', 6)
    into cadeiras values (10917, 'Física do Estado Sólido', 6)
    into cadeiras values (10918, 'Conceção de Sistemas Digitais', 6)
    into cadeiras values (10919, 'Eletrónica de Potência em Acionamentos', 6)
    into cadeiras values (10920, 'Eletrónica de Rádio Frequência', 6)
    into cadeiras values (10922, 'Eletrónica III', 6)
    into cadeiras values (10923, 'Eletrónica IV', 6)
    into cadeiras values (10924, 'Teoria de Circuitos Elétricos', 6)
    into cadeiras values (10932, 'Eletrónica I', 6)
    into cadeiras values (10933, 'Eletrónica II', 6)
    into cadeiras values (10946, 'Eletrotecnia Teórica', 6)
    into cadeiras values (10960, 'Controlo por Computador', 6)
    into cadeiras values (10967, 'Tração Elétrica', 6)
    into cadeiras values (10970, 'Álgebra Linear I', 6)
    into cadeiras values (10972, 'Análise Matemática II A', 6)
    into cadeiras values (10974, 'Geometria', 6)
    into cadeiras values (10975, 'Probabilidades e Estatística I', 6)
    into cadeiras values (10976, 'Análise Matemática III A', 6)
    into cadeiras values (10979, 'Análise Numérica I', 6)
    into cadeiras values (10980, 'Análise Matemática IV A', 6)
    into cadeiras values (10981, 'Álgebra II', 6)
    into cadeiras values (10982, 'Análise Numérica II', 6)
    into cadeiras values (10983, 'Otimização Linear', 6)
    into cadeiras values (10984, 'Topologia e Introdução à Análise Funcional', 6)
    into cadeiras values (10993, 'Controlo Inteligente', 6)
    into cadeiras values (10994, 'Sistemas Distribuídos de Manufatura', 6)
    into cadeiras values (10997, 'Degradação e Proteção de Superfícies', 6)
    into cadeiras values (10998, 'Eletrotécnica e Máquinas Elétricas', 6)
    into cadeiras values (11007, 'Polímeros em Conservação', 6)
    into cadeiras values (11008, 'Aquisição e Tratamento de Imagem', 6)
    into cadeiras values (11009, 'Diagnóstico e Conservação de Pintura', 6)
    into cadeiras values (11010, 'Biologia Celular A', 6)
    into cadeiras values (11011, 'Bioinformática', 6)
    into cadeiras values (11026, 'Avaliação Ambiental Estratégica e de Projetos', 6)
    into cadeiras values (11027, 'Ecologia Marinha e de Águas Interiores', 6)
    into cadeiras values (11044, 'Microeletrónica I', 6)
    into cadeiras values (11045, 'Microeletrónica II', 6)
    into cadeiras values (11046, 'Microeletrónica III', 6)
    into cadeiras values (11048, 'Optoeletrónica', 6)
    into cadeiras values (11053, 'Reatores Químicos III', 6)
    into cadeiras values (11054, 'Eletrotécnica Geral', 6)
    into cadeiras values (11055, 'Projeto de Máquinas', 6)
    into cadeiras values (11057, 'Técnicas de Caraterização e Ensaios não Destrutivos', 6)
    into cadeiras values (11068, 'Conversão Eletromecânica de Energia', 6)
    into cadeiras values (11073, 'Informática para Ciências e Engenharias A', 6)
    into cadeiras values (11141, 'Programação Orientada pelos Objetos B', 6)
    into cadeiras values (11146, 'Informática para Ciências e Engenharias B', 6)
    into cadeiras values (11147, 'Informática para Ciências e Engenharias C', 6)
    into cadeiras values (11148, 'Informática para Ciências e Engenharias D', 6)
    into cadeiras values (11149, 'Informática para Ciências e Engenharias E', 6)
    into cadeiras values (11194, 'Química Orgânica Geral A', 6)
    into cadeiras values (11195, 'Química Orgânica Geral B', 6)
    into cadeiras values (11273, 'Hidráulica Geral', 6)
    into cadeiras values (11456, 'Robótica', 6)
    into cadeiras values (11459, 'Eletrónica de Reduzida Tensão e Gestão de Potência', 6)
    into cadeiras values (11504, 'Análise Matemática I', 6)
    into cadeiras values (11505, 'Álgebra Linear e Geometria Analítica', 6)
    into cadeiras values (11511, 'Processos e Materiais da Eletrónica', 6)
    into cadeiras values (11515, 'Física Atómica', 6)
    into cadeiras values (11519, 'Instrumentação Analógica', 6)
    into cadeiras values (11520, 'Instrumentação Digital', 6)
    into cadeiras values (11522, 'Aplicações Avançadas de Instrumentação', 6)
    into cadeiras values (11537, 'Simulação e Modelação Computacional em Engenharia Física', 6)
    into cadeiras values (11678, 'Métodos Matemáticos da Física', 6)
    into cadeiras values (11821, 'Termodinâmica B', 6)
    into cadeiras values (11823, 'Introdução à Biofísica A', 6)
    into cadeiras values (11825, 'Aplicações Avançadas de Instrumentação Biomédica', 6)
    into cadeiras values (11832, 'Introdução à Biofísica B', 6)
    into cadeiras values (3082, 'Física I B', 9)
    into cadeiras values (10637, 'Introdução à Programação', 9)
    into cadeiras values (10640, 'Bases de Dados', 9)
    into cadeiras values (10687, 'Projeto I', 9)
    into cadeiras values (10873, 'Química-Física (CR)', 9)
    into cadeiras values (10969, 'Análise Matemática I A', 9)
    into cadeiras values (10971, 'Introdução à Lógica e Matemática Elementar', 9)
    into cadeiras values (10973, 'Álgebra Linear II', 9)
    into cadeiras values (10977, 'Álgebra I', 9)
    into cadeiras values (10978, 'Probabilidades e Estatística II', 9)
    into cadeiras values (11004, 'Princípios de Química e Técnicas de Laboratório e Segurança', 9)
    into cadeiras values (11152, 'Arquitetura de Computadores', 9)
    into cadeiras values (11153, 'Programação Orientada pelos Objetos', 9)
    into cadeiras values (11154, 'Algoritmos e Estruturas de Dados', 9)
    into cadeiras values (11155, 'Fundamentos de Sistemas de Operação', 9)
    into cadeiras values (10700, 'Projeto de Bioquímica', 12)
    into cadeiras values (10711, 'Projeto de Biotecnologia', 12)
    into cadeiras values (10712, 'Projeto de Química Orgânica', 12)
    into cadeiras values (10961, 'Preparação de Dissertação', 12)
    into cadeiras values (11232, 'Preparação de Dissertação (MIEI)', 12)
    into cadeiras values (11156, 'Atividade Prática de Desenvolvimento Curricular', 15)
    into cadeiras values (10689, 'Projeto II', 18)
    into cadeiras values (10962, 'Dissertação em Engenharia Eletrotécnica e de Computadores', 18)
    into cadeiras values (8911, 'Dissertação em Engenharia Biomédica', 30)
    into cadeiras values (8912, 'Dissertação em Engenharia Física', 30)
    into cadeiras values (8914, 'Dissertação em Engenharia Química e Bioquímica', 30)
    into cadeiras values (9039, 'Dissertação em Engenharia do Ambiente', 30)
    into cadeiras values (9275, 'Dissertação em Eng. e Gestão Industrial', 30)
    into cadeiras values (9276, 'Dissertação em Eng. Mecânica', 30)
    into cadeiras values (9479, 'Dissertação em Engenharia de Micro e Nanotecnologias', 30)
    into cadeiras values (10205, 'Dissertação em Engenharia de Materiais', 30)
    into cadeiras values (10449, 'Dissertação em Engenharia Civil', 30)
    into cadeiras values (11233, 'Elaboração de Dissertação (MIEI)', 30)
    into cadeiras values (10794, 'Dissertação em Engenharia Informática', 42)
SELECT * FROM dual;

-- Planos
insert all
    into planos values (1116, '9015', 4)
    into planos values (1116, '9224', 4)
    into planos values (1473, '9089', 9)
    into planos values (1491, '9096', 4)
    into planos values (1525, '9455', 6)
    into planos values (1525, '9113', 6)
    into planos values (1712, '9119', 5)
    into planos values (1837, '9089', 5)
    into planos values (1839, '9089', 6)
    into planos values (1849, 'L231', 5)
    into planos values (1849, '9096', 5)
    into planos values (1897, '9096', 3)
    into planos values (2077, '8036', 3)
    into planos values (2184, 'L209', 6)
    into planos values (2212, '9224', 3)
    into planos values (2227, '8036', 2)
    into planos values (2309, '9104', 7)
    into planos values (2363, 'L209', 9)
    into planos values (2424, 'L209', 7)
    into planos values (2468, '9119', 4)
    into planos values (2478, '9123', 5)
    into planos values (2478, '9104', 5)
    into planos values (2567, 'L209', 3)
    into planos values (2626, '9104', 9)
    into planos values (2641, '9123', 8)
    into planos values (2672, '8036', 5)
    into planos values (2677, '8036', 6)
    into planos values (2680, '8036', 6)
    into planos values (2685, '8036', 1)
    into planos values (2690, '8036', 2)
    into planos values (2691, '8036', 3)
    into planos values (2693, '8036', 4)
    into planos values (2696, '8036', 4)
    into planos values (2761, '9116', 6)
    into planos values (2784, '9089', 7)
    into planos values (2826, 'L209', 9)
    into planos values (2846, 'L209', 9)
    into planos values (3082, '9455', 2)
    into planos values (3086, '9455', 6)
    into planos values (3107, '9209', 4)
    into planos values (3466, '9348', 4)
    into planos values (3622, '9209', 1)
    into planos values (3622, '9455', 1)
    into planos values (3622, '9113', 1)
    into planos values (3629, '9119', 2)
    into planos values (3645, '9123', 3)
    into planos values (3645, '9104', 3)
    into planos values (3651, '9123', 4)
    into planos values (3654, '9123', 5)
    into planos values (3656, '9123', 6)
    into planos values (3658, '9123', 5)
    into planos values (3660, '9123', 6)
    into planos values (3666, '9123', 7)
    into planos values (3668, '9123', 8)
    into planos values (3669, '9123', 4)
    into planos values (3683, '9224', 1)
    into planos values (3683, '9126', 1)
    into planos values (3689, '9126', 3)
    into planos values (3690, '9126', 3)
    into planos values (3705, 'L231', 6)
    into planos values (3705, '9096', 8)
    into planos values (3705, '9126', 8)
    into planos values (3705, '9104', 8)
    into planos values (3708, '9104', 5)
    into planos values (3710, '9104', 9)
    into planos values (3731, '9104', 8)
    into planos values (3733, '9104', 6)
    into planos values (3736, '9104', 6)
    into planos values (3737, '9348', 1)
    into planos values (3742, 'L209', 2)
    into planos values (3745, 'L209', 1)
    into planos values (3748, 'L209', 4)
    into planos values (3752, 'L209', 5)
    into planos values (3753, 'L209', 5)
    into planos values (3804, '9015', 4)
    into planos values (3804, '9224', 4)
    into planos values (3804, '9348', 4)
    into planos values (3813, '9116', 3)
    into planos values (3827, '9116', 6)
    into planos values (3919, '9113', 5)
    into planos values (4094, '9126', 6)
    into planos values (4094, '9104', 8)
    into planos values (5004, 'L231', 3)
    into planos values (5004, '9116', 3)
    into planos values (5004, '9089', 3)
    into planos values (5004, '9096', 3)
    into planos values (5004, '9126', 3)
    into planos values (5004, '9099', 3)
    into planos values (5005, '9455', 3)
    into planos values (5005, 'L209', 3)
    into planos values (5005, '9113', 3)
    into planos values (5006, '9455', 3)
    into planos values (5006, 'L209', 3)
    into planos values (5006, '9113', 3)
    into planos values (5016, '9104', 9)
    into planos values (5278, '9096', 8)
    into planos values (5284, '9455', 7)
    into planos values (5289, '9455', 8)
    into planos values (5294, '9119', 1)
    into planos values (5324, 'L231', 7)
    into planos values (5340, 'L231', 7)
    into planos values (5340, '9096', 7)
    into planos values (5353, '9126', 4)
    into planos values (5474, '9089', 5)
    into planos values (7087, '9224', 2)
    into planos values (7095, '9224', 3)
    into planos values (7102, '9015', 4)
    into planos values (7102, '9224', 4)
    into planos values (7104, '9015', 5)
    into planos values (7107, '9224', 5)
    into planos values (7112, '9348', 6)
    into planos values (7122, '9015', 1)
    into planos values (7155, '9099', 5)
    into planos values (7156, '9099', 3)
    into planos values (7170, '9099', 5)
    into planos values (7171, '9099', 5)
    into planos values (7214, '9104', 6)
    into planos values (7226, 'L209', 6)
    into planos values (7228, 'L209', 7)
    into planos values (7268, '9126', 7)
    into planos values (7289, '9126', 3)
    into planos values (7300, '9015', 5)
    into planos values (7303, 'L209', 7)
    into planos values (7305, 'L209', 8)
    into planos values (7311, 'L209', 7)
    into planos values (7312, 'L209', 7)
    into planos values (7316, 'L209', 8)
    into planos values (7317, 'L209', 8)
    into planos values (7319, '9126', 6)
    into planos values (7321, '9126', 3)
    into planos values (7336, '9119', 3)
    into planos values (7340, '9224', 4)
    into planos values (7342, '9126', 6)
    into planos values (7382, '8036', 1)
    into planos values (7396, '8036', 3)
    into planos values (7399, '8036', 2)
    into planos values (7403, '9126', 8)
    into planos values (7414, '8036', 4)
    into planos values (7417, '8036', 5)
    into planos values (7418, '8036', 5)
    into planos values (7419, '8036', 6)
    into planos values (7420, '8036', 6)
    into planos values (7436, '9096', 7)
    into planos values (7454, 'L231', 8)
    into planos values (7464, '9096', 4)
    into planos values (7471, 'L231', 4)
    into planos values (7471, '9096', 4)
    into planos values (7474, 'L231', 3)
    into planos values (7474, '9096', 5)
    into planos values (7477, 'L209', 7)
    into planos values (7490, '9096', 6)
    into planos values (7492, '9096', 6)
    into planos values (7494, 'L231', 6)
    into planos values (7522, '9096', 8)
    into planos values (7544, '9123', 3)
    into planos values (7544, '9104', 3)
    into planos values (7580, '9089', 9)
    into planos values (7588, '9455', 6)
    into planos values (7661, '9455', 7)
    into planos values (7661, 'L209', 9)
    into planos values (7663, '9119', 3)
    into planos values (7702, '9116', 2)
    into planos values (7706, '9116', 2)
    into planos values (7712, '9116', 4)
    into planos values (7715, '9116', 5)
    into planos values (7719, '9116', 6)
    into planos values (7747, '9113', 2)
    into planos values (7777, 'L209', 1)
    into planos values (7792, '9089', 5)
    into planos values (7813, '9209', 5)
    into planos values (7814, '9209', 5)
    into planos values (7816, '9209', 5)
    into planos values (7933, '9348', 3)
    into planos values (7996, '9119', 2)
    into planos values (8143, '9348', 4)
    into planos values (8147, '9119', 4)
    into planos values (8148, '9119', 5)
    into planos values (8149, '9119', 5)
    into planos values (8150, '9119', 5)
    into planos values (8153, '9119', 6)
    into planos values (8154, '9119', 6)
    into planos values (8163, '9104', 6)
    into planos values (8437, '9089', 8)
    into planos values (8575, '9119', 7)
    into planos values (8708, '9089', 8)
    into planos values (8789, '9224', 2)
    into planos values (8791, '9015', 3)
    into planos values (8792, '9015', 3)
    into planos values (8792, '9224', 3)
    into planos values (8911, '9455', 9)
    into planos values (8912, '9113', 9)
    into planos values (8914, '9126', 9)
    into planos values (9039, '9099', 9)
    into planos values (9275, '9104', 9)
    into planos values (9276, '9123', 9)
    into planos values (9279, '9126', 6)
    into planos values (9123, '9089', 2)
    into planos values (9376, '9089', 6)
    into planos values (9377, '9089', 6)
    into planos values (9379, '9089', 8)
    into planos values (9387, '9089', 9)
    into planos values (9398, '9089', 9)
    into planos values (9405, '9089', 9)
    into planos values (9414, '9113', 2)
    into planos values (9414, '9119', 4)
    into planos values (9477, 'L231', 3)
    into planos values (9479, 'L231', 9)
    into planos values (10106, '8036', 2)
    into planos values (10130, '8036', 1)
    into planos values (10144, '9096', 5)
    into planos values (10194, '9096', 4)
    into planos values (10195, '9096', 6)
    into planos values (10197, '9096', 7)
    into planos values (10199, '9096', 6)
    into planos values (10200, '9096', 9)
    into planos values (10201, '9096', 9)
    into planos values (10205, '9096', 9)
    into planos values (10288, 'L209', 8)
    into planos values (10343, '9099', 1)
    into planos values (10344, '9116', 3)
    into planos values (10345, '9099', 1)
    into planos values (10346, '9099', 1)
    into planos values (10347, 'L231', 1)
    into planos values (10347, '9116', 1)
    into planos values (10347, '9089', 1)
    into planos values (10347, '9096', 1)
    into planos values (10347, '9126', 1)
    into planos values (10347, '9099', 1)
    into planos values (10348, '9099', 2)
    into planos values (10349, 'L231', 1)
    into planos values (10349, '9116', 2)
    into planos values (10349, '9224', 2)
    into planos values (10349, '9096', 1)
    into planos values (10349, 'L209', 2)
    into planos values (10349, '9123', 1)
    into planos values (10349, '9126', 2)
    into planos values (10349, '9099', 2)
    into planos values (10349, '9104', 1)
    into planos values (10350, '9099', 2)
    into planos values (10351, '9099', 2)
    into planos values (10352, 'L231', 2)
    into planos values (10352, '9015', 2)
    into planos values (10352, '9116', 2)
    into planos values (10352, '9209', 2)
    into planos values (10352, '9224', 2)
    into planos values (10352, '9348', 2)
    into planos values (10352, '9455', 2)
    into planos values (10352, '9089', 2)
    into planos values (10352, '9096', 2)
    into planos values (10352, 'L209', 2)
    into planos values (10352, '9113', 2)
    into planos values (10352, '9123', 2)
    into planos values (10352, '9126', 2)
    into planos values (10352, '9099', 2)
    into planos values (10352, '9104', 2)
    into planos values (10352, '9119', 2)
    into planos values (10353, 'L231', 1)
    into planos values (10353, '9089', 3)
    into planos values (10353, '9096', 1)
    into planos values (10353, 'L209', 5)
    into planos values (10353, '9123', 1)
    into planos values (10353, '9099', 3)
    into planos values (10353, '9104', 2)
    into planos values (10354, '9116', 3)
    into planos values (10354, '9455', 5)
    into planos values (10355, '9099', 3)
    into planos values (10356, '9099', 3)
    into planos values (10357, '9099', 3)
    into planos values (10358, 'L231', 4)
    into planos values (10358, '9015', 4)
    into planos values (10358, '9116', 4)
    into planos values (10358, '9209', 4)
    into planos values (10358, '9224', 4)
    into planos values (10358, '9348', 4)
    into planos values (10358, '9455', 4)
    into planos values (10358, '9089', 4)
    into planos values (10358, '9096', 4)
    into planos values (10358, 'L209', 4)
    into planos values (10358, '9113', 4)
    into planos values (10358, '9123', 4)
    into planos values (10358, '9126', 4)
    into planos values (10358, '9099', 4)
    into planos values (10358, '9104', 4)
    into planos values (10358, '9119', 4)
    into planos values (10359, '9099', 4)
    into planos values (10360, '9099', 4)
    into planos values (10361, '9089', 4)
    into planos values (10361, '9123', 6)
    into planos values (10361, '9104', 4)
    into planos values (10362, '9099', 4)
    into planos values (10363, 'L231', 2)
    into planos values (10363, '9096', 2)
    into planos values (10363, '9099', 4)
    into planos values (10364, '9099', 4)
    into planos values (10365, '9099', 5)
    into planos values (10366, '9099', 5)
    into planos values (10367, '9099', 5)
    into planos values (10368, '9099', 6)
    into planos values (10369, '9099', 6)
    into planos values (10370, '9099', 6)
    into planos values (10371, '9099', 6)
    into planos values (10372, '9099', 6)
    into planos values (10375, '9099', 7)
    into planos values (10376, '9099', 7)
    into planos values (10377, '9099', 7)
    into planos values (10378, '9099', 7)
    into planos values (10379, '9099', 7)
    into planos values (10380, 'L231', 8)
    into planos values (10380, '9455', 8)
    into planos values (10380, '9089', 8)
    into planos values (10380, '9096', 8)
    into planos values (10380, 'L209', 8)
    into planos values (10380, '9113', 8)
    into planos values (10380, '9123', 8)
    into planos values (10380, '9126', 8)
    into planos values (10380, '9099', 8)
    into planos values (10380, '9104', 8)
    into planos values (10380, '9119', 8)
    into planos values (10388, '9099', 9)
    into planos values (10389, '9099', 9)
    into planos values (10397, '9099', 8)
    into planos values (10398, '9099', 8)
    into planos values (10399, '9099', 8)
    into planos values (10400, '9099', 8)
    into planos values (10401, '9099', 9)
    into planos values (10405, '9099', 9)
    into planos values (10406, '9096', 1)
    into planos values (10407, 'L231', 1)
    into planos values (10407, '9455', 1)
    into planos values (10407, '9096', 1)
    into planos values (10408, '9096', 2)
    into planos values (10410, 'L231', 2)
    into planos values (10410, '9348', 2)
    into planos values (10410, '9089', 4)
    into planos values (10410, 'L209', 4)
    into planos values (10410, '9126', 4)
    into planos values (10411, 'L231', 3)
    into planos values (10411, '9096', 3)
    into planos values (10411, 'L209', 3)
    into planos values (10411, '9123', 3)
    into planos values (10411, '9126', 4)
    into planos values (10411, '9104', 3)
    into planos values (10412, '9096', 3)
    into planos values (10413, 'L231', 4)
    into planos values (10413, '9096', 3)
    into planos values (10415, '9096', 7)
    into planos values (10416, 'L231', 1)
    into planos values (10417, 'L231', 5)
    into planos values (10418, 'L231', 4)
    into planos values (10419, '9455', 4)
    into planos values (10420, 'L231', 5)
    into planos values (10420, '9104', 5)
    into planos values (10422, 'L231', 6)
    into planos values (10423, 'L231', 9)
    into planos values (10423, '9455', 3)
    into planos values (10423, '9123', 7)
    into planos values (10423, '9126', 5)
    into planos values (10424, 'L231', 9)
    into planos values (10425, 'L231', 9)
    into planos values (10426, '9089', 1)
    into planos values (10427, '9089', 1)
    into planos values (10428, '9089', 1)
    into planos values (10429, '9116', 1)
    into planos values (10429, '9089', 1)
    into planos values (10429, '9113', 1)
    into planos values (10429, '9123', 1)
    into planos values (10429, '9104', 1)
    into planos values (10430, '9089', 2)
    into planos values (10431, '9089', 2)
    into planos values (10432, '9089', 3)
    into planos values (10433, '9089', 3)
    into planos values (10434, '9089', 4)
    into planos values (10435, '9089', 4)
    into planos values (10436, '9089', 4)
    into planos values (10437, '9089', 4)
    into planos values (10438, '9089', 5)
    into planos values (10439, '9089', 5)
    into planos values (10440, '9089', 6)
    into planos values (10441, '9089', 6)
    into planos values (10442, '9089', 7)
    into planos values (10443, '9089', 7)
    into planos values (10444, '9089', 7)
    into planos values (10445, '9089', 7)
    into planos values (10446, '9089', 8)
    into planos values (10447, '9089', 8)
    into planos values (10448, '9089', 8)
    into planos values (10449, '9089', 9)
    into planos values (10450, '9089', 9)
    into planos values (10451, '9089', 9)
    into planos values (10454, '9089', 9)
    into planos values (10455, '9089', 8)
    into planos values (10459, '9089', 9)
    into planos values (10462, '9089', 8)
    into planos values (10463, '9089', 8)
    into planos values (10464, '9089', 9)
    into planos values (10465, '9089', 9)
    into planos values (10466, '9089', 8)
    into planos values (10467, '9089', 8)
    into planos values (10468, '9089', 9)
    into planos values (10469, '9089', 9)
    into planos values (10470, '9089', 9)
    into planos values (10473, 'L209', 1)
    into planos values (10475, 'L209', 1)
    into planos values (10476, '9455', 1)
    into planos values (10476, 'L209', 1)
    into planos values (10476, '9113', 1)
    into planos values (10477, '9123', 6)
    into planos values (10478, 'L209', 3)
    into planos values (10479, 'L209', 3)
    into planos values (10480, 'L209', 4)
    into planos values (10481, 'L209', 6)
    into planos values (10482, '9123', 1)
    into planos values (10485, 'L209', 9)
    into planos values (10486, '9123', 6)
    into planos values (10487, 'L209', 9)
    into planos values (10489, 'L209', 9)
    into planos values (10490, '9113', 7)
    into planos values (10493, '9123', 4)
    into planos values (10494, '9123', 5)
    into planos values (10495, '9123', 7)
    into planos values (10496, '9123', 2)
    into planos values (10499, 'L209', 7)
    into planos values (10501, 'L209', 7)
    into planos values (10503, '9123', 7)
    into planos values (10504, 'L209', 8)
    into planos values (10505, '9123', 7)
    into planos values (10511, '9123', 9)
    into planos values (10515, '9455', 1)
    into planos values (10517, '9455', 2)
    into planos values (10517, '9113', 2)
    into planos values (10518, '9113', 3)
    into planos values (10519, '9455', 3)
    into planos values (10519, '9113', 3)
    into planos values (10520, '9455', 3)
    into planos values (10521, '9455', 3)
    into planos values (10522, '9455', 4)
    into planos values (10522, '9113', 4)
    into planos values (10523, '9455', 4)
    into planos values (10524, '9455', 5)
    into planos values (10524, '9113', 5)
    into planos values (10525, 'L231', 5)
    into planos values (10525, '9455', 5)
    into planos values (10525, '9113', 5)
    into planos values (10526, '9113', 6)
    into planos values (10527, '9455', 6)
    into planos values (10528, '9455', 7)
    into planos values (10530, '9113', 7)
    into planos values (10531, '9113', 8)
    into planos values (10532, '9455', 8)
    into planos values (10534, '9455', 8)
    into planos values (10535, '9455', 9)
    into planos values (10536, '9455', 7)
    into planos values (10537, '9455', 9)
    into planos values (10537, '9113', 9)
    into planos values (10538, '9113', 1)
    into planos values (10539, '9455', 2)
    into planos values (10539, '9113', 2)
    into planos values (10540, '9113', 3)
    into planos values (10541, '9113', 4)
    into planos values (10541, '9123', 4)
    into planos values (10544, '9113', 8)
    into planos values (10546, '9113', 8)
    into planos values (10551, '9113', 9)
    into planos values (10571, '9104', 1)
    into planos values (10572, '9123', 1)
    into planos values (10572, '9104', 1)
    into planos values (10573, '9104', 2)
    into planos values (10574, '9104', 2)
    into planos values (10575, '9123', 3)
    into planos values (10575, '9126', 5)
    into planos values (10575, '9104', 3)
    into planos values (10576, '9116', 3)
    into planos values (10576, '9123', 3)
    into planos values (10576, '9104', 3)
    into planos values (10577, '9104', 4)
    into planos values (10578, '9104', 4)
    into planos values (10579, '9116', 6)
    into planos values (10579, '9123', 4)
    into planos values (10579, '9104', 4)
    into planos values (10580, '9104', 5)
    into planos values (10581, '9123', 5)
    into planos values (10581, '9104', 5)
    into planos values (10587, '9104', 6)
    into planos values (10588, '9104', 7)
    into planos values (10610, '9104', 8)
    into planos values (10614, '9104', 9)
    into planos values (10633, '9123', 2)
    into planos values (10637, '9119', 1)
    into planos values (10640, '9119', 4)
    into planos values (10647, '9348', 1)
    into planos values (10648, '9348', 1)
    into planos values (10649, '9348', 1)
    into planos values (10650, '9224', 2)
    into planos values (10650, '9348', 2)
    into planos values (10651, '9348', 3)
    into planos values (10652, '9224', 3)
    into planos values (10652, '9348', 3)
    into planos values (10653, '9348', 4)
    into planos values (10654, '9348', 4)
    into planos values (10655, '9348', 5)
    into planos values (10660, '9348', 6)
    into planos values (10661, '9015', 4)
    into planos values (10661, '9348', 6)
    into planos values (10662, '9348', 6)
    into planos values (10663, '9116', 1)
    into planos values (10664, '9116', 1)
    into planos values (10665, '9116', 2)
    into planos values (10666, '9116', 4)
    into planos values (10667, '9116', 4)
    into planos values (10668, '9116', 4)
    into planos values (10669, '9116', 4)
    into planos values (10670, '9116', 5)
    into planos values (10671, '9116', 5)
    into planos values (10672, '9116', 5)
    into planos values (10675, '9126', 2)
    into planos values (10676, '9224', 2)
    into planos values (10676, '9126', 2)
    into planos values (10677, '9126', 4)
    into planos values (10678, '9126', 4)
    into planos values (10679, '9126', 5)
    into planos values (10681, '9126', 5)
    into planos values (10683, '9126', 6)
    into planos values (10684, '9126', 7)
    into planos values (10687, '9126', 7)
    into planos values (10689, '9126', 9)
    into planos values (10690, '9224', 1)
    into planos values (10690, '9126', 1)
    into planos values (10692, '9015', 1)
    into planos values (10693, '9015', 1)
    into planos values (10694, '9015', 2)
    into planos values (10695, '9015', 2)
    into planos values (10696, '9015', 2)
    into planos values (10697, '9015', 2)
    into planos values (10698, '9015', 3)
    into planos values (10698, '9224', 3)
    into planos values (10699, '9015', 3)
    into planos values (10700, '9015', 5)
    into planos values (10701, '9224', 5)
    into planos values (10702, '9015', 6)
    into planos values (10704, '9224', 6)
    into planos values (10705, '9224', 6)
    into planos values (10707, '9224', 1)
    into planos values (10709, '9224', 5)
    into planos values (10710, '9224', 5)
    into planos values (10711, '9224', 5)
    into planos values (10712, '9224', 5)
    into planos values (10713, '9015', 1)
    into planos values (10713, '9348', 1)
    into planos values (10713, '9113', 1)
    into planos values (10714, '9015', 3)
    into planos values (10715, '9224', 1)
    into planos values (10716, '9224', 6)
    into planos values (10721, '9015', 5)
    into planos values (10748, '9224', 6)
    into planos values (10794, '9119', 9)
    into planos values (10822, '9126', 5)
    into planos values (10824, '9015', 1)
    into planos values (10824, '9224', 1)
    into planos values (10824, '9126', 1)
    into planos values (10866, '9224', 4)
    into planos values (10867, '8036', 2)
    into planos values (10873, '8036', 3)
    into planos values (10874, '9015', 6)
    into planos values (10917, '9113', 6)
    into planos values (10918, 'L209', 7)
    into planos values (10919, 'L209', 7)
    into planos values (10920, 'L209', 9)
    into planos values (10922, 'L209', 8)
    into planos values (10923, 'L209', 8)
    into planos values (10924, 'L209', 2)
    into planos values (10925, '9099', 9)
    into planos values (10932, 'L231', 4)
    into planos values (10932, 'L209', 4)
    into planos values (10933, 'L231', 5)
    into planos values (10933, 'L209', 5)
    into planos values (10942, '9209', 4)
    into planos values (10946, 'L209', 5)
    into planos values (10960, 'L209', 6)
    into planos values (10961, 'L209', 9)
    into planos values (10962, 'L209', 9)
    into planos values (10967, 'L209', 8)
    into planos values (10969, '9209', 1)
    into planos values (10970, '9209', 1)
    into planos values (10971, '9209', 1)
    into planos values (10972, '9209', 2)
    into planos values (10973, '9209', 2)
    into planos values (10974, '9209', 2)
    into planos values (10975, '9209', 2)
    into planos values (10976, '9209', 3)
    into planos values (10977, '9209', 3)
    into planos values (10978, '9209', 3)
    into planos values (10979, '9209', 3)
    into planos values (10980, '9209', 4)
    into planos values (10981, '9209', 4)
    into planos values (10982, '9209', 4)
    into planos values (10983, '9209', 5)
    into planos values (10984, '9209', 5)
    into planos values (10993, 'L209', 7)
    into planos values (10994, 'L209', 9)
    into planos values (10997, '9096', 8)
    into planos values (10998, '9123', 8)
    into planos values (11004, '8036', 1)
    into planos values (11005, '8036', 1)
    into planos values (11006, '8036', 3)
    into planos values (11007, '8036', 4)
    into planos values (11008, '8036', 4)
    into planos values (11009, '8036', 5)
    into planos values (11010, '9348', 3)
    into planos values (11011, '9348', 5)
    into planos values (11024, '9116', 6)
    into planos values (11025, '9116', 6)
    into planos values (11026, '9099', 8)
    into planos values (11027, '9099', 4)
    into planos values (11035, '9224', 6)
    into planos values (11044, 'L231', 6)
    into planos values (11044, '9096', 6)
    into planos values (11044, '9113', 6)
    into planos values (11045, 'L231', 7)
    into planos values (11046, 'L231', 8)
    into planos values (11048, 'L231', 9)
    into planos values (11053, '9126', 7)
    into planos values (11054, '9113', 4)
    into planos values (11054, '9104', 4)
    into planos values (11055, '9123', 8)
    into planos values (11057, '9096', 5)
    into planos values (11068, 'L209', 6)
    into planos values (11073, '9099', 1)
    into planos values (11141, '9455', 4)
    into planos values (11146, '9348', 2)
    into planos values (11146, '9126', 2)
    into planos values (11147, '9089', 2)
    into planos values (11148, '9123', 2)
    into planos values (11148, '9104', 2)
    into planos values (11149, 'L231', 2)
    into planos values (11149, '9096', 4)
    into planos values (11152, '9119', 2)
    into planos values (11153, '9119', 2)
    into planos values (11154, '9119', 3)
    into planos values (11155, '9119', 3)
    into planos values (11156, '9119', 5)
    into planos values (11191, '9119', 8)
    into planos values (11194, '9348', 2)
    into planos values (11194, '9455', 2)
    into planos values (11195, 'L231', 2)
    into planos values (11195, '9096', 2)
    into planos values (11232, '9119', 9)
    into planos values (11233, '9119', 9)
    into planos values (11273, '9116', 5)
    into planos values (11456, 'L209', 8)
    into planos values (11459, 'L209', 9)
    into planos values (11504, 'L231', 1)
    into planos values (11504, '9116', 1)
    into planos values (11504, '9455', 1)
    into planos values (11504, '9089', 1)
    into planos values (11504, '9096', 1)
    into planos values (11504, 'L209', 1)
    into planos values (11504, '9113', 1)
    into planos values (11504, '9123', 1)
    into planos values (11504, '9126', 1)
    into planos values (11504, '9099', 1)
    into planos values (11504, '9104', 1)
    into planos values (11504, '9119', 1)
    into planos values (11505, 'L231', 1)
    into planos values (11505, '9116', 1)
    into planos values (11505, '9455', 1)
    into planos values (11505, '9089', 1)
    into planos values (11505, '9096', 1)
    into planos values (11505, 'L209', 1)
    into planos values (11505, '9113', 1)
    into planos values (11505, '9123', 1)
    into planos values (11505, '9126', 1)
    into planos values (11505, '9099', 1)
    into planos values (11505, '9104', 1)
    into planos values (11505, '9119', 1)
    into planos values (11506, '9096', 5)
    into planos values (11507, '9096', 9)
    into planos values (11508, '9096', 9)
    into planos values (11511, 'L231', 6)
    into planos values (11512, '9113', 4)
    into planos values (11513, '9113', 4)
    into planos values (11514, '9455', 5)
    into planos values (11514, '9113', 5)
    into planos values (11515, '9113', 6)
    into planos values (11517, '9113', 7)
    into planos values (11518, '9113', 7)
    into planos values (11519, '9455', 7)
    into planos values (11519, '9113', 7)
    into planos values (11520, '9455', 8)
    into planos values (11520, '9113', 8)
    into planos values (11521, '9113', 8)
    into planos values (11522, '9113', 9)
    into planos values (11523, '9113', 9)
    into planos values (11536, '9113', 8)
    into planos values (11537, '9113', 9)
    into planos values (11678, '9113', 5)
    into planos values (11821, '9348', 3)
    into planos values (11821, '9455', 3)
    into planos values (11823, '9348', 2)
    into planos values (11825, '9455', 9)
    into planos values (11826, '9455', 6)
    into planos values (11827, '9455', 6)
    into planos values (11828, '9455', 2)
    into planos values (11832, '9015', 2)
SELECT * FROM dual;

-- 1.5

create sequence seq_num_aluno
start with 60000
increment by 1;

-- 1.6
insert into matriculas values (seq_num_aluno.nextval,106671,'9119',to_date('2022.09.10','YYYY.MM.DD'));
insert into matriculas values (seq_num_aluno.nextval,110616,'9209',to_date('2022.09.10','YYYY.MM.DD'));
insert into matriculas values (seq_num_aluno.nextval,110616,'9119',to_date('2022.09.10','YYYY.MM.DD'));
insert into matriculas values (seq_num_aluno.nextval,112946,'9209',to_date('2022.09.10','YYYY.MM.DD'));

-- 2.1
create or replace trigger inscreve_novo_aluno
	after insert on matriculas
	for each row
	begin
		insert into inscricoes 
      select :new.numero, curso, cadeira, to_number(extract(year from :new.dataMatr)), :new.dataMatr
      from planos
      where curso = :new.curso and semestre = 1;
  end;
/

-- 2.2
insert into matriculas values (seq_num_aluno.nextval,117317,'9119',to_date('2022.09.10','YYYY.MM.DD'));

-- 3.1
-- Ajuda começar por ter uma view que a cada momento diz o nº de creditos a que cada aluno
-- está inscrito em cada ano 
create or replace view totalCred as
    select numero, anoLetivo, sum(ects) as total
    from inscricoes I natural join cadeiras
    group by numero, anoLetivo;

-- Agora vamos adicionar um trigger que depois de cada inserção em inscricoes
-- verifica se não há nenhum aluno que ficou com mais de 72 créditos
create or replace trigger verifica_limite
  after insert on inscricoes
  declare NumECTS number;
  begin
    select max(total) into NumECTS from totalCred;
    if (NumECTS >  72)
      then Raise_Application_Error (-20100, 'Atingiu o limite de créditos. Inscrição não aceite!');
    end if;
  end;
/

-- 3.2

-- Vamos então inscrevê-lo a cadeiras do curso dele
insert into inscricoes values (60004, '9119', 10640, 2022, to_date('2022.09.10','YYYY.MM.DD'));
insert into inscricoes values (60004, '9119', 11152, 2022, to_date('2022.09.10','YYYY.MM.DD'));
insert into inscricoes values (60004, '9119', 11153, 2022, to_date('2022.09.10','YYYY.MM.DD'));
insert into inscricoes values (60004, '9119', 11154, 2022, to_date('2022.09.10','YYYY.MM.DD'));
insert into inscricoes values (60004, '9119', 7996, 2022, to_date('2022.09.10','YYYY.MM.DD'));


-- Se agora o desinscrevermos à cadeira 7996, depois já o conseguimos inscrever à 7336
delete from inscricoes where cadeira = 7996;
insert into inscricoes values (60004, '9119', 7336, 2022, to_date('2022.09.10','YYYY.MM.DD'));

-- Para a coisa ficar mesmo "à prova de bala", também há que fazer a verificação  quando se mudam os
-- créditos de uma cadeira,  e quando se muda uma inscricao.
-- Mas é tudo muito igual
create or replace trigger verifica_limite_credCadeira
  after update of ects on cadeiras
  declare NumECTS number;
  begin
    select max(total) into NumECTS from totalCred;
    if (NumECTS >  72)
      then Raise_Application_Error (-20100, 'Atingiu o limite de créditos. Inscrição não aceite!');
    end if;
  end;
/

create or replace trigger verifica_limite_muda_ins
  after update on inscricoes
  declare NumECTS number;
  begin
    select max(total) into NumECTS from totalCred;
    if (NumECTS >  72)
      then Raise_Application_Error (-20100, 'Atingiu o limite de créditos. Inscrição não aceite!');
    end if;
  end;
/

-- 4.1
alter table colocados drop constraint pk_col;
alter table matriculas drop constraint fk_matrcolcurso;
alter table colocados drop constraint un_col;
alter table colocados add constraint pk_col primary key (idCandidato, ano);


-- Nota: com isto o esquema deixa de estar normalizado!
-- Repare que idCandidato -> Nome 
-- Antes isso não tinha problema pois idCandidato era chave. Mas agora deixa de ser!
-- Haveria que decompor a tabela de colocações em duas:
-- nomesColocados(idCandidato, Nome)
-- colocados(idCandidato, curso, ano).


-- Vamos então adicionar algumas colocações, agora para Matemática, para o aluno que já tinha inscrições

insert into colocados values (117317,'FILIPE A. L. M.','9209',2023);
commit;

-- 4.2

alter table matriculas add ano number(4,0);
update matriculas set ano = 2022;

alter table matriculas drop constraint un_mat;
alter table matriculas add constraint un_mat unique(idCandidato, ano);

alter table colocados add constraint un_col unique(idCandidato,curso,ano);
alter table matriculas add constraint fk_matrcolcurso foreign key (idCandidato,curso,ano) references colocados(idCandidato,curso,ano);

-- 4.3

create table inativas (
  numero number(6,0),
  curso varchar2(4)
  );
  
alter table inativas add constraint pk_ina primary key (numero, curso);
--alter table matriculas add constraint uni_num_cur unique (numero, curso);
alter table inativas add constraint fk_ina foreign key (numero, curso) references matriculas(numero, curso);

-- 4.4
create or replace trigger muda_curso
  before insert on matriculas
  for each row
  declare Existe number;
  begin
    select count(*) into Existe 
    from matriculas where idCandidato = :new.idcandidato;
    if Existe > 0
      then
        insert into inativas 
          select numero, curso
          from matriculas
          where idCandidato = :new.idcandidato;
    end if;
  end;
/

-- 4.5
-- Tentemos então matricular o aluno que matriculou na 2.2.
insert into matriculas values (seq_num_aluno.nextval,117317,'9209',to_date('2023.09.10','YYYY.MM.DD'),2023);


-- 4.6
-- ***** Trabalho *****
-- crie uma trigger impede_matr_ant para impedir inserções e alterações em inscrições 
-- para cursos em que o aluno já não está inscrito
create or replace trigger impede_matr_ant
  before insert or update on inscricoes
  for each row
  declare Existe number;
  begin
    select count(*) into Existe 
    from inativas
    where numero = :new.numero and curso = :new.curso;
    if Existe > 0
      then Raise_Application_Error (-20100, 'O aluno já não está nesse curso. Inscrição não aceite!');
    end if;
  end;
/

-- Tentemos inscrever o aluno que mudou de curso
-- numa cadeira do curso de matemática
insert into inscricoes values (60006, '9209', 3107, 2023, to_date('2023.09.11','YYYY.MM.DD'));